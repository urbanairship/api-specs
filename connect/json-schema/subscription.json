{
  "description": "`SUBSCRIPTION` events reflect changes to users' subscription preferences â€” reflected in opt_in and opt_out values. These events help you track a user's subscription status in the system and the total number of subscribers.\n",
  "properties": {
    "body": {
      "properties": {
        "event_type": {
          "description": "Determines the source of the subscription event. `registration` and `create_and_send` events result in changes to `opted_in` dates; all other event types contain `opted_out` dates.\n\n* `registration`: Represents a change to a user's `commercial_opted_in`, `transactional_opted_in`, `click_tracking_opted_in`, or `open_tracking_opted_in` dates.\n* `create_and_send`: A user's opted_in status changed as a result of a [Create and Send](https://docs.airship.com/guides/messaging/audience/segmentation/bulk-sending/) event.\n* `bounce`: Subscription status changed as a result of a bounce event.\n* `list_unsubscribe`: The user clicked the `unsubscribe` button in their email client.\n* `link_unsubscribe`: The user clicked an `unsubscribe` hyperlink in an email.\n* `spam_complaint`: The user classified an email as spam.\n* `out_of_band`: A bounce occurred after the recipient MTA accepted an email.\n",
          "enum": [
            "registration",
            "create_and_send",
            "bounce",
            "list_unsubscribe",
            "link_unsubscribe",
            "spam_complaint",
            "out_of_band"
          ],
          "type": "string"
        },
        "identifiers": {
          "description": "Contains address information specific to the `channel_id` specified in the event.",
          "properties": {
            "address": {
              "description": "The email address representing the change.",
              "type": "string"
            },
            "subscription_lists": {
              "description": "Changes to a device or user's subscription list membership.",
              "properties": {
                "canceled": {
                  "description": "An array of subscription list IDs which were canceled. Present\nonly when a cancellation occurred.\n",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "enrolled": {
                  "description": "An array of subscription list IDs which were enrolled. Present\nonly when an enrollment occurred.\n",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "scope": {
                  "description": "The scope at which the operation was performed; only present on events\nwhich target a Named User.\n",
                  "enum": [
                    "app",
                    "web",
                    "email",
                    "sms"
                  ],
                  "title": "Scope",
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "properties": {
          "properties": {
            "click_tracking_opted_in": {
              "format": "date-time",
              "type": "string"
            },
            "click_tracking_opted_out": {
              "format": "date-time",
              "type": "string"
            },
            "commercial_opted_in": {
              "format": "date-time",
              "type": "string"
            },
            "commercial_opted_out": {
              "format": "date-time",
              "type": "string"
            },
            "open_tracking_opted_in": {
              "format": "date-time",
              "type": "string"
            },
            "open_tracking_opted_out": {
              "format": "date-time",
              "type": "string"
            },
            "transactional_opted_in": {
              "format": "date-time",
              "type": "string"
            },
            "transactional_opted_out": {
              "format": "date-time",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "required": [
        "event_type",
        "identifiers"
      ],
      "type": "object",
      "x-schema-tag": "Event Body"
    },
    "device": {
      "description": "Holds information about the email `device` (an individual email channel) the event occurred against.",
      "properties": {
        "channel": {
          "description": "The unique, platform-agnostic channel identifier for a device.",
          "type": "string"
        },
        "delivery_address": {
          "description": "The email address of the channel the event occurred against.",
          "type": "string"
        },
        "device_type": {
          "description": "Email compliance events use the `EMAIL` device type.",
          "enum": [
            "EMAIL"
          ],
          "type": "string"
        },
        "named_user": {
          "description": "The Named User that the channel is associated with; appears only if the channel is associated with a Named User.",
          "type": "string"
        }
      },
      "required": [
        "device_type",
        "delivery_address"
      ],
      "title": "Email Device",
      "type": "object"
    },
    "id": {
      "description": "Uniquely identifies an event. The data stream will occasionally send duplicate events. Duplicate events will have the same `id`, `type`, `occurred`, `device`, and `body` values but different `offset` and `processed` values. You should use the `id` to deduplicate.",
      "type": "string"
    },
    "occurred": {
      "description": "When the event occurred.",
      "type": "string"
    },
    "offset": {
      "description": "An identifier of a location in the stream; used to resume the stream after severing a connection. If you open a stream using the offset value, the stream will resume with the next element in the stream. You should store this value as a string so that you can easily resume the stream if it ends for any reason.",
      "type": "string"
    },
    "processed": {
      "description": "When the event was ingested by Airship. There may be some latency between when the event occurred, and when it was processed.",
      "type": "string"
    },
    "type": {
      "enum": [
        "SUBSCRIPTION"
      ],
      "type": "string"
    },
    "user": {
      "description": "The current state of the user when the event is emitted, including the contact ID and an optional named user ID.",
      "properties": {
        "contact_id": {
          "description": "The Contact identifier for the device.",
          "type": "string"
        },
        "named_user_id": {
          "description": "The Named User identifier for the device.",
          "type": "string"
        }
      },
      "title": "User",
      "type": "object",
      "x-schema-tag": "User information"
    }
  },
  "required": [
    "id",
    "device",
    "type",
    "occurred",
    "processed",
    "body"
  ],
  "title": "Subscription event",
  "type": "object",
  "x-note": "These events appear in the stream whenever a user changes their opted_in or opted_out dates, which may not be meaningful in all cases; a user may opt into an email list on which they're already a member.\n",
  "x-schema-tag": "Events"
}